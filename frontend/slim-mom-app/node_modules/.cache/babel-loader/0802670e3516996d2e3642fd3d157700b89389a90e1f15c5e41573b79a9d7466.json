{"ast":null,"code":"var _jsxFileName = \"D:\\\\GoIT\\\\Modules\\\\Team Project\\\\slim-mom\\\\frontend\\\\slim-mom-app\\\\src\\\\components\\\\AuthForm\\\\AuthForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { logIn, register } from '../../redux/auth/authOperations';\nimport { useAuth } from '../../hooks/useAuth';\nimport css from './AuthForm.module.css';\nimport { NavLink } from 'react-router-dom';\nimport { TextField } from \"../TextField/TextField\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AuthForm = ({\n  header,\n  fields,\n  buttonText,\n  footerText,\n  footerLink,\n  isLogin\n}) => {\n  _s();\n  const {\n    isRefreshing\n  } = useAuth();\n  const [formData, setFormData] = useState({});\n  // const [showPassword, setShowPassword] = useState(false);\n  const [message, setMessage] = useState(null);\n  const dispatch = useDispatch();\n  const [isValid, setIsValid] = useState(null);\n\n  // Handle Password Validation\n  const validatePassword = (e, field) => {\n    setMessage('');\n    if (field === 'password' && !isLogin) {\n      const valid = e.target.value.length >= 8;\n      setIsValid(e.target.value.length === 0 ? null : valid);\n      setMessage(valid ? 'Password is secure.' : 'Password must be at least 8 characters long.');\n    }\n  };\n  const handleChange = (e, field) => {\n    setFormData({\n      ...formData,\n      [field]: e.target.value\n    });\n    validatePassword(e, field);\n  };\n\n  // Handle Submit\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (isLogin) {\n        await dispatch(logIn(formData)).unwrap();\n      } else {\n        await dispatch(register(formData)).unwrap();\n      }\n    } catch (err) {\n      setIsValid(false);\n      if (err.status === 409) {\n        setMessage('Account already exists.');\n      } else if (err.status === 403) {\n        setMessage('Invalid email or password.');\n      } else {\n        setMessage(`${err.message || 'An error has occurred.'}`);\n      }\n      clearPasswordField();\n    }\n  };\n  const clearPasswordField = () => {\n    setFormData(prevData => ({\n      ...prevData,\n      password: ''\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: css.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: css.header,\n      children: header\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: css.form,\n      children: [fields.map((field, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          type: field.type,\n          className: field.type === 'password' && isValid !== null ? isValid ? css.valid : css.invalid : '',\n          label: field.placeholder,\n          value: formData[field.name] || '',\n          onChange: e => handleChange(e, field.name),\n          id: field.name,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), field.type === 'password' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: css.message,\n            style: {\n              color: isValid ? 'var(--mint-green)' : 'var(--red)'\n            },\n            children: [' ', message]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 33\n          }, this)\n        }, void 0, false) : null]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: css.actionButtons,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"primary-button\",\n          style: {\n            width: isRefreshing ? '170px' : null\n          },\n          children: isRefreshing ? isLogin ? 'Signing in...' : 'Signing up...' : buttonText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"secondary\",\n          children: /*#__PURE__*/_jsxDEV(NavLink, {\n            to: footerLink,\n            style: {\n              textDecoration: \"none\",\n              color: \"inherit\"\n            },\n            children: footerText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthForm, \"ZdaVbps0qASHFBIsEZOfNeUSFC0=\", false, function () {\n  return [useAuth, useDispatch];\n});\n_c = AuthForm;\nvar _c;\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["React","useState","useDispatch","logIn","register","useAuth","css","NavLink","TextField","jsxDEV","_jsxDEV","Fragment","_Fragment","AuthForm","header","fields","buttonText","footerText","footerLink","isLogin","_s","isRefreshing","formData","setFormData","message","setMessage","dispatch","isValid","setIsValid","validatePassword","e","field","valid","target","value","length","handleChange","handleSubmit","preventDefault","unwrap","err","status","clearPasswordField","prevData","password","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","form","map","index","style","position","type","invalid","label","placeholder","name","onChange","id","required","color","actionButtons","width","to","textDecoration","_c","$RefreshReg$"],"sources":["D:/GoIT/Modules/Team Project/slim-mom/frontend/slim-mom-app/src/components/AuthForm/AuthForm.jsx"],"sourcesContent":["import React, {useState} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport {logIn, register} from '../../redux/auth/authOperations';\r\nimport {useAuth} from '../../hooks/useAuth';\r\nimport css from './AuthForm.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {TextField} from \"../TextField/TextField\";\r\n\r\nexport const AuthForm = ({\r\n                             header,\r\n                             fields,\r\n                             buttonText,\r\n                             footerText,\r\n                             footerLink,\r\n                             isLogin,\r\n                         }) => {\r\n    const {isRefreshing} = useAuth();\r\n    const [formData, setFormData] = useState({});\r\n    // const [showPassword, setShowPassword] = useState(false);\r\n    const [message, setMessage] = useState(null);\r\n    const dispatch = useDispatch();\r\n    const [isValid, setIsValid] = useState(null);\r\n\r\n    // Handle Password Validation\r\n    const validatePassword = (e, field) => {\r\n        setMessage('');\r\n\r\n        if (field === 'password' && !isLogin) {\r\n            const valid = e.target.value.length >= 8;\r\n            setIsValid(e.target.value.length === 0 ? null : valid);\r\n            setMessage(valid ? 'Password is secure.' : 'Password must be at least 8 characters long.');\r\n        }\r\n    };\r\n\r\n    const handleChange = (e, field) => {\r\n        setFormData({\r\n            ...formData,\r\n            [field]: e.target.value,\r\n        });\r\n        validatePassword(e, field);\r\n    };\r\n\r\n    // Handle Submit\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            if (isLogin) {\r\n                await dispatch(logIn(formData)).unwrap();\r\n            } else {\r\n                await dispatch(register(formData)).unwrap();\r\n            }\r\n        } catch (err) {\r\n            setIsValid(false);\r\n\r\n            if (err.status === 409) {\r\n                setMessage('Account already exists.');\r\n            } else if (err.status === 403) {\r\n                setMessage('Invalid email or password.');\r\n            } else {\r\n                setMessage(`${err.message || 'An error has occurred.'}`);\r\n            }\r\n            clearPasswordField();\r\n        }\r\n    };\r\n\r\n    const clearPasswordField = () => {\r\n        setFormData(prevData => ({\r\n            ...prevData,\r\n            password: '',\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <div className={css.container}>\r\n            <h1 className={css.header}>\r\n                {header}\r\n            </h1>\r\n            <form onSubmit={handleSubmit} className={css.form}>\r\n                {fields.map((field, index) => (\r\n                    <div key={index} style={{position: 'relative'}}>\r\n                        <TextField\r\n                            type={field.type}\r\n                            className={field.type === 'password' && isValid !== null ? (isValid ? css.valid : css.invalid) : ''}\r\n                            label={field.placeholder}\r\n                            value={formData[field.name] || ''}\r\n                            onChange={e => handleChange(e, field.name)}\r\n                            id={field.name}\r\n                            required\r\n                        />\r\n                        {field.type === 'password' ?\r\n                            (<>\r\n                                <p className={css.message}\r\n                                    style={{color: isValid ? 'var(--mint-green)' : 'var(--red)'}}\r\n                                >\r\n                                    {' '}\r\n                                    {message}\r\n                                </p>\r\n                            </>) : null\r\n                        }\r\n                    </div>\r\n                ))}\r\n\r\n\r\n                <div className={css.actionButtons}>\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"primary-button\"\r\n                        style={{width: isRefreshing ? '170px' : null}}\r\n                    >\r\n                        {isRefreshing ?\r\n                            (isLogin ? 'Signing in...' : 'Signing up...') : buttonText}\r\n                    </button>\r\n\r\n                    <button className=\"secondary\">\r\n                        <NavLink to={footerLink} style={{textDecoration: \"none\", color: \"inherit\"}}>\r\n                            {footerText}\r\n                        </NavLink>\r\n                    </button>\r\n\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}